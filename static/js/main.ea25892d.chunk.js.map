{"version":3,"sources":["Header.module.css","Sidepanel.module.css","App.module.css","Form.module.css","helpers.js","Questionnode.module.css","Endnode.module.css","ButtonEdge.js","App.tsx","Header.tsx","Questionnode.tsx","Sidepanel.tsx","Endnode.tsx","Form.jsx","form.txt","reportWebVitals.ts","index.tsx"],"names":["module","exports","__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","__esModule","react_flow_renderer_1","require","vectorAdd","vector1","vector2","x","parseToGraph","flowData","startNodeId","output","startId","nodeMap","_i","flowData_1","element","isNode","type","id","question","data","answers","map","a","text","nextId","console","log","_a","flowData_2","isEdge","source","target","parseInt","sourceHandle","download","content","fileName","contentType","document","createElement","file","Blob","href","URL","createObjectURL","click","fileToJSON","fileReader","FileReader","onload","event","JSON","parse","onerror","error","readAsText","ButtonEdge","sourceX","sourceY","targetX","targetY","sourcePosition","targetPosition","style","arrowHeadType","markerEndId","removeEdge","useContext","RemoveEdgeContext","edgePath","getBezierPath","markerEnd","getMarkerEnd","getEdgeCenter","edgeCenterX","edgeCenterY","className","d","width","height","foreignObjectSize","requiredExtensions","onClick","evt","stopPropagation","onEdgeClick","NodeTypes","Header","props","styles","headerPanel","logo","logoIcon","onChange","setTitle","title","itemsContainer","headerItem","createNode","Start","headerItemLabel","Question","End","onExport","onSave","onLoadSave","onTestForm","Questionnode","selectedNodeId","SelectedNodeIdContext","wrapperClassName","questionNodeWrapper","selected","getPercent","i","increment","questionWrapper","position","Position","Left","questionNodeText","answerList","index","answerWrapper","answerText","top","toString","Right","Sidepanel","nodeData","sidePanel","sidePanelLabel","rows","sidePanelTextInput","newNodeData","setNodeData","setQuestion","answerHeader","splice","removeAnswer","iconBtn","setAnswerText","panelBtn","deleteNode","deleteBtn","setResultText","stringify","Endnode","wrapper","resultText","questionText","selectedAns","setSelectedAns","Answer","answer","Form","useState","questionStack","setQuestionStack","answerMap","setAnswerMap","formData","formWrapper","concat","qData","qid","aid","newAMap","Object","assign","newStack","hasReached","currQid","endWrapper","endTitle","endResult","React","createContext","App","rfInstance","setRfInstance","lastSelectedPos","setLastSelectedPos","showForm","setShowForm","fileInput","useRef","setSelectedNodeId","flowElements","setFlowElements","Date","now","createStartNode","createQuestionNode","createEndNode","Error","domElem","current","onchange","files","json","elements","alert","formdata","fetch","formHtml","resp","htmlStr","formDoc","DOMParser","parseFromString","getElementById","textContent","outputStr","documentElement","outerHTML","replace","toObject","app","accept","ref","backdrop","backdropElementWrapper","backdropHeader","backdropRemoveBtn","backdropMain","removed","filter","o","removeNode","getSelectedNodeData","setNode","flowWrapper","Provider","nodeTypes","end","edgeTypes","buttonedge","onElementClick","onEdgeUpdate","oldEdge","newConnection","updateEdge","onConnect","params","addEdge","onLoad","variant","BackgroundVariant","Dots","gap","size","nodeColor","node","nodeStrokeWidth","controls","customControlBtn","controlStartIcon","controlsQuestionIcon","controlsEndIcon","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.ea25892d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"logo\":\"Header_logo__1_msB\",\"logoIcon\":\"Header_logoIcon__c47Hc\",\"title\":\"Header_title__2VpMf\",\"headerPanel\":\"Header_headerPanel__3TNwh\",\"itemsContainer\":\"Header_itemsContainer__Wdp3U\",\"headerItemLabel\":\"Header_headerItemLabel__1jLLQ\",\"headerItem\":\"Header_headerItem__23q8M\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sidePanel\":\"Sidepanel_sidePanel__3a658\",\"sidePanelLabel\":\"Sidepanel_sidePanelLabel__1ZEtV\",\"sidePanelTextInput\":\"Sidepanel_sidePanelTextInput__2HnYh\",\"panelBtn\":\"Sidepanel_panelBtn__3H8fA\",\"deleteBtn\":\"Sidepanel_deleteBtn__e2VaB Sidepanel_panelBtn__3H8fA\",\"iconBtn\":\"Sidepanel_iconBtn___qr-z\",\"answerWrapper\":\"Sidepanel_answerWrapper__2a6EB\",\"answerHeader\":\"Sidepanel_answerHeader__QkmT8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__1kX79\",\"flowWrapper\":\"App_flowWrapper__39H7h\",\"fileInput\":\"App_fileInput__OeFCF\",\"backdrop\":\"App_backdrop__1J_fz\",\"backdropElementWrapper\":\"App_backdropElementWrapper__Jj-rr\",\"backdropRemoveBtn\":\"App_backdropRemoveBtn__2m8Ct\",\"backdropHeader\":\"App_backdropHeader__28V_f\",\"backdropMain\":\"App_backdropMain__2R1nr\",\"controls\":\"App_controls__14oJX\",\"customControlBtn\":\"App_customControlBtn__3XnkQ\",\"controlStartIcon\":\"App_controlStartIcon__EY1MC\",\"controlsQuestionIcon\":\"App_controlsQuestionIcon__2Qw4v\",\"controlsEndIcon\":\"App_controlsEndIcon__2HrRA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formWrapper\":\"Form_formWrapper__2N2X-\",\"questionWrapper\":\"Form_questionWrapper__1qGAg\",\"questionText\":\"Form_questionText__16sDA\",\"answer\":\"Form_answer__2uEds\",\"selected\":\"Form_selected__Q6STM\",\"endWrapper\":\"Form_endWrapper__1VwxS\",\"endTitle\":\"Form_endTitle__sS77_\",\"endResult\":\"Form_endResult__1iDh0\"};","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nexports.__esModule = true;\nvar react_flow_renderer_1 = require(\"react-flow-renderer\");\nfunction vectorAdd(vector1, vector2) {\n    return {\n        x: vector1.x + vector2.x,\n        y: vector1.y + vector2.y\n    };\n}\nexports.vectorAdd = vectorAdd;\nfunction parseToGraph(flowData) {\n    var startNodeId = null;\n    var output = {\n        startId: '',\n        nodeMap: {}\n    };\n    // Add all the nodes in first\n    for (var _i = 0, flowData_1 = flowData; _i < flowData_1.length; _i++) {\n        var element = flowData_1[_i];\n        if (react_flow_renderer_1.isNode(element)) {\n            if (element.type === \"input\") {\n                startNodeId = element.id;\n            }\n            else if (element.type === \"question\") {\n                output.nodeMap[element.id] = {\n                    type: 'question',\n                    question: element.data.question,\n                    answers: element.data.answers.map(function (a) {\n                        return {\n                            text: a.text,\n                            nextId: null\n                        };\n                    })\n                };\n            }\n            else if (element.type === \"end\") {\n                output.nodeMap[element.id] = {\n                    type: 'end',\n                    result: element.data.result\n                };\n            }\n        }\n    }\n    if (startNodeId === null) {\n        console.log('There is no start node');\n    }\n    // Add all the edges\n    for (var _a = 0, flowData_2 = flowData; _a < flowData_2.length; _a++) {\n        var element = flowData_2[_a];\n        if (react_flow_renderer_1.isEdge(element)) {\n            if (element.source === startNodeId) {\n                output.startId = element.target;\n            }\n            else {\n                output.nodeMap[element.source]\n                    .answers[parseInt(element.sourceHandle, 10)].nextId = element.target;\n            }\n        }\n    }\n    return output;\n}\nexports.parseToGraph = parseToGraph;\nfunction download(content, fileName, contentType) {\n    var a = document.createElement(\"a\");\n    var file = new Blob([content], { type: contentType });\n    a.href = URL.createObjectURL(file);\n    a.download = fileName;\n    a.click();\n}\nexports.download = download;\nfunction fileToJSON(file) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, new Promise(function (resolve, reject) {\n                    var fileReader = new FileReader();\n                    fileReader.onload = function (event) { return resolve(JSON.parse(event.target.result)); };\n                    fileReader.onerror = function (error) { return reject(error); };\n                    fileReader.readAsText(file);\n                })];\n        });\n    });\n}\nexports.fileToJSON = fileToJSON;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"questionNodeWrapper\":\"Questionnode_questionNodeWrapper__1H-8v\",\"selected\":\"Questionnode_selected___BzoX\",\"questionWrapper\":\"Questionnode_questionWrapper__2MD59\",\"questionHandle\":\"Questionnode_questionHandle__2gcb5\",\"questionNodeText\":\"Questionnode_questionNodeText__1Z2Rj\",\"answerWrapper\":\"Questionnode_answerWrapper__M-V40\",\"answerText\":\"Questionnode_answerText__2NCQw\",\"answerList\":\"Questionnode_answerList__1vg8X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Endnode_wrapper__2tmgF\",\"selected\":\"Endnode_selected__2hW_g\",\"resultText\":\"Endnode_resultText__DyQCT\"};","import React, { useContext } from 'react';\nimport {\n  getBezierPath,\n  getEdgeCenter,\n  getMarkerEnd,\n} from 'react-flow-renderer';\nimport { RemoveEdgeContext } from './App';\n\nimport './index.css';\n\nconst foreignObjectSize = 40;\n\nexport default function ButtonEdge({\n  id,\n  sourceX,\n  sourceY,\n  targetX,\n  targetY,\n  sourcePosition,\n  targetPosition,\n  style = {},\n  data,\n  arrowHeadType,\n  markerEndId,\n}) \n{ \n  const removeEdge = useContext(RemoveEdgeContext);\n  const onEdgeClick = (evt, id) => {\n    evt.stopPropagation();\n    console.log(`remove ${id}`);\n    removeEdge(id);\n  };\n  const edgePath = getBezierPath({\n    sourceX,\n    sourceY,\n    sourcePosition,\n    targetX,\n    targetY,\n    targetPosition,\n  });\n  const markerEnd = getMarkerEnd(arrowHeadType, markerEndId);\n  const [edgeCenterX, edgeCenterY] = getEdgeCenter({\n    sourceX,\n    sourceY,\n    targetX,\n    targetY,\n  });\n\n  return (\n    <>\n      <path\n        id={id}\n        style={style}\n        className=\"react-flow__edge-path\"\n        d={edgePath}\n        markerEnd={markerEnd}\n      />\n      <foreignObject\n        width={foreignObjectSize}\n        height={foreignObjectSize}\n        x={edgeCenterX - foreignObjectSize / 2}\n        y={edgeCenterY - foreignObjectSize / 2}\n        className=\"edgebutton-foreignobject\"\n        requiredExtensions=\"http://www.w3.org/1999/xhtml\"\n      >\n        <button\n          className=\"edgebutton\"\n          onClick={(event) => onEdgeClick(event, id)}\n        >\n          X\n        </button>\n      </foreignObject>\n    </>\n  );\n}","import { useRef, useState } from 'react';\nimport ReactFlow, {addEdge, Background, BackgroundVariant, ControlButton, Controls, MiniMap, updateEdge} from 'react-flow-renderer';\nimport styles from './App.module.css';\nimport ButtonEdge from './ButtonEdge';\nimport Header from './Header';\nimport { download, fileToJSON, parseToGraph, Vector, vectorAdd } from './helpers';\nimport Questionnode from './Questionnode';\nimport Sidepanel from './Sidepanel';\nimport React from 'react';\nimport Endnode from './Endnode';\nimport Form from './Form';\nimport { MdRemoveCircle } from \"react-icons/md\";\nimport { FaFlagCheckered, FaQuestionCircle, FaPlay } from \"react-icons/fa\";\n// @ts-ignore\nimport formHtml from \"./form.txt\";\n\nexport enum NodeTypes {\n  Start,\n  Question,\n  End\n}\n\nexport const RemoveEdgeContext = React.createContext((id: string) => {});\n\nexport const SelectedNodeIdContext = React.createContext('');\n\nfunction App() {\n  const [ rfInstance, setRfInstance ] = useState(null);\n  const [ title, setTitle ] = useState('My Calculator');\n  const [ lastSelectedPos, setLastSelectedPos ] = useState({ x:300, y:300 })\n  const [ showForm, setShowForm ] = useState(false);\n  const fileInput = useRef(null);\n  /**\n   * The id of the node that is selected\n   */\n  const [ selectedNodeId, setSelectedNodeId ] = useState('');\n  /**\n   * Stores all the react flow node elements\n   */\n  const [ flowElements, setFlowElements ] = useState<Array<any>>([]);\n  const getSelectedNodeData = () => {\n    const target = flowElements.filter(o => o.id === selectedNodeId);\n    if (target.length === 0) {\n      return null;\n    }\n    return target[0];\n  }\n  const removeNode = (id: string) => {\n    const removed = flowElements.filter(o => o.id !== id);\n    // If none is removed do nothing\n    if (removed.length === flowElements.length) {\n      return;\n    }\n    setFlowElements(removed);\n  }\n  /**\n   * Update the data for one specific node with the given id\n   * @param id \n   * @param data \n   */\n  const setNode = (id: string, data: any) => {\n    const removed = flowElements.filter(o => o.id !== id);\n    // If none is removed do nothing\n    if (removed.length === flowElements.length) {\n      return;\n    }\n    setFlowElements(removed.concat([data]));\n  }\n  /**\n   * Used to create a node\n   */\n  const createNode = (type: NodeTypes) => {\n    const createStartNode = () => {\n      const element = {\n        id: Date.now().toString(),\n        type: 'input',\n        data: { label: 'Start Node' },\n        position: lastSelectedPos,\n        sourcePosition: 'right',\n        className: 'startNode',\n      }\n      setFlowElements(flowElements.concat([element]));\n      setLastSelectedPos(vectorAdd(element.position as Vector, { x: 100, y: 100 }));\n    }\n    const createQuestionNode = () => {\n      const element = {\n        id: Date.now().toString(),\n        type: 'question',\n        data: {\n          label: 'Question node',\n          question: 'My question',\n          answers: [\n            {\n              text: \"My Answer\",\n            },\n          ]\n        },\n        position: lastSelectedPos\n      }\n      setFlowElements(flowElements.concat([element]));\n      setLastSelectedPos(vectorAdd(element.position as Vector, { x: 100, y: 100 }));\n    }\n    const createEndNode = () => {\n      const element = {\n        id: Date.now().toString(),\n        type: 'end',\n        data: { label: 'End Node', result: 'My Result' },\n        position: lastSelectedPos\n      }\n      setFlowElements(flowElements.concat([element]));\n      setLastSelectedPos(vectorAdd(element.position as Vector, { x: 100, y: 100 }));\n    }\n    switch(type) {\n      case NodeTypes.Start:\n        createStartNode();\n        break;\n      case NodeTypes.Question:\n        createQuestionNode();\n          break;\n      case NodeTypes.End:\n        createEndNode();\n        break;\n      default:\n        throw new Error(`Invalid type of ${type}`);\n    }\n  }\n  const onLoadSave = async () => {\n    const domElem = fileInput.current as any;\n    domElem?.click();\n    domElem.onchange = async () => {\n      try {\n        const json = await fileToJSON(domElem.files[0]);\n        setFlowElements((json as any).elements);\n      } catch (error) {\n        alert('Save file is invalid');\n        console.log(error);\n      }\n    }\n  }\n  const onExport = async () => {\n    // console.log(parseToGraph(flowElements));\n    // Convert to JSON\n    const formdata = JSON.stringify(parseToGraph(flowElements));\n    // Read and parse template html file\n    const resp = await fetch(formHtml);\n    const htmlStr = await resp.text();\n    const formDoc = (new DOMParser()).parseFromString(htmlStr, \"text/html\");\n    // Add json to html file\n    formDoc.getElementById('form-json')!.textContent = formdata;\n    const outputStr = formDoc.documentElement.outerHTML;\n    download(outputStr, `${title.replace(' ', '_')}.html`, 'text/plain');\n  }\n  const onSave = async () => {\n    const data = JSON.stringify((rfInstance as any).toObject());\n    download(data, `${title.replace(' ', '_')}.json`, 'text/plain');\n  }\n  /**\n   * Called when a node is clicked\n   */\n  const onNodeClick = (event: any, element: any) => {\n    setLastSelectedPos(vectorAdd(element.position as Vector, { x: 100, y: 100 }));\n    setSelectedNodeId(element.id);\n  }\n  /**\n   * Called when an edge is updated\n   */\n  const onEdgeUpdate = (oldEdge: any, newConnection: any) => {\n    setFlowElements(updateEdge(oldEdge, newConnection, flowElements));\n  }\n  /**\n   * Caleld when two points are connected\n   */\n  const onConnect = (params: any) => {\n    // Create an edge\n    setFlowElements(addEdge({ ...params, type: 'buttonedge'}, flowElements))\n  }\n  const removeEdge = (id: string) => {\n    setFlowElements(flowElements.filter(e => e.id !== id))\n  }\n  const onTestForm = () => {\n    setShowForm(true);\n  }\n  const renderForm = () => {\n    if (showForm) {\n      return (\n        <div className={styles.backdrop}>\n          <div className={styles.backdropElementWrapper}>\n            <div className={styles.backdropHeader}>\n              <MdRemoveCircle\n                className={styles.backdropRemoveBtn}\n                onClick={() => setShowForm(false)}/>\n            </div>\n            <div className={styles.backdropMain}>\n              <Form formData={parseToGraph(flowElements)}/>\n            </div>\n          </div>\n        </div>\n      )\n    }\n    return (null)\n  }\n  return (\n    <div className={styles.app}>\n      <input type=\"file\" \n        accept=\"application/JSON\"\n        className={styles.fileInput} ref={fileInput}/>\n      {renderForm()}\n      <Header\n        onTestForm={onTestForm}\n        onLoadSave={onLoadSave}\n        onSave={onSave}\n        onExport={onExport}\n        createNode={createNode} title={title} setTitle={setTitle}/>\n      <Sidepanel\n        deleteNode={() => removeNode(selectedNodeId)}\n        nodeData={getSelectedNodeData()}\n        setNodeData={(data: any) => setNode(selectedNodeId, data)}\n      />\n      <div className={styles.flowWrapper}>\n      <RemoveEdgeContext.Provider value={removeEdge}>\n        <SelectedNodeIdContext.Provider value={selectedNodeId}>\n          <ReactFlow\n            nodeTypes={{ question: Questionnode, end: Endnode }}\n            edgeTypes={{ buttonedge: ButtonEdge }}\n            elements={flowElements}\n            onElementClick={onNodeClick}\n            onEdgeUpdate={onEdgeUpdate}\n            onConnect={onConnect}\n            onLoad={(a: any) => setRfInstance(a)}\n          >\n            <Background\n              variant={BackgroundVariant.Dots}\n              gap={24}\n              size={1}\n            />\n            <MiniMap\n              nodeColor={(node) => {\n                switch (node.type) {\n                  case 'input':\n                    return '#FCB332';\n                  case 'question':\n                    return '#EB4B64';\n                  case 'end':\n                    return '#6CE063';\n                  default:\n                    return '#eee';\n                }\n              }}\n              nodeStrokeWidth={3}\n            />\n            <Controls className={styles.controls}>\n              <ControlButton onClick={() => createNode(NodeTypes.Start)}\n                className={styles.customControlBtn}>\n                <FaPlay className={styles.controlStartIcon}/>\n              </ControlButton>\n              <ControlButton onClick={() => createNode(NodeTypes.Question)}\n                className={styles.customControlBtn}>\n                <FaQuestionCircle className={styles.controlsQuestionIcon}/>\n              </ControlButton>\n              <ControlButton onClick={() => createNode(NodeTypes.End)}\n                className={styles.customControlBtn}>\n                <FaFlagCheckered className={styles.controlsEndIcon}/>\n              </ControlButton>\n            </Controls>\n          </ReactFlow>\n        </SelectedNodeIdContext.Provider>\n      </RemoveEdgeContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport styles from './Header.module.css';\nimport { FaFlagCheckered, FaQuestionCircle, FaPlay,\n  FaFileExport, FaSave, FaCloudUploadAlt, FaRobot } from \"react-icons/fa\";\nimport { BiNetworkChart } from \"react-icons/bi\";\nimport { NodeTypes } from './App';\n\ntype CreateNode = (type: NodeTypes) => void;\n\ninterface HeaderProps {\n  title: string;\n  setTitle: Function;\n  createNode: CreateNode;\n  onExport: Function;\n  onSave: Function;\n  onLoadSave: Function;\n  onTestForm: Function;\n}\n\nconst Header: React.FC<HeaderProps> = (props: HeaderProps) => {\n  return (\n    <div className={styles.headerPanel}>\n      <div className={styles.logo}>\n        <BiNetworkChart className={styles.logoIcon}/>\n        <input\n          onChange={e => {\n          props.setTitle(e.target.value);\n        }}\n        value={props.title} className={styles.title}/>\n      </div>\n      <div className={styles.itemsContainer}>\n        <div className={styles.headerItem}\n          onClick={() => props.createNode(NodeTypes.Start)}>\n          <div className={styles.headerItemLabel}>Start Node</div>\n          <FaPlay/>\n        </div>\n        <div className={styles.headerItem}\n          onClick={() => props.createNode(NodeTypes.Question)}>\n          <div className={styles.headerItemLabel}>Question Node</div>\n          <FaQuestionCircle/>\n        </div>\n        <div className={styles.headerItem}\n          onClick={() => props.createNode(NodeTypes.End)}>\n          <div className={styles.headerItemLabel}>End Node</div>\n          <FaFlagCheckered/>\n        </div>\n        <div className={styles.headerItem}\n          onClick={() => props.onExport()}>\n          <div className={styles.headerItemLabel}>Export</div>\n          <FaFileExport/>\n        </div>\n        <div className={styles.headerItem}\n          onClick={() => props.onSave()}>\n          <div className={styles.headerItemLabel}>Save</div>\n          <FaSave/>\n        </div>\n        <div className={styles.headerItem}\n          onClick={() => props.onLoadSave()}>\n          <div className={styles.headerItemLabel}>Upload Save</div>\n          <FaCloudUploadAlt/>\n        </div>\n        <div className={styles.headerItem}\n          onClick={() => props.onTestForm()}>\n          <div className={styles.headerItemLabel}>Test Form</div>\n          <FaRobot/>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Header;","import { useContext } from \"react\";\nimport { Handle, Position } from \"react-flow-renderer\";\nimport { SelectedNodeIdContext } from \"./App\";\nimport styles from './Questionnode.module.css';\nexport interface Answer {\n  /**\n   * The text answer\n   */\n  text: string;\n  /**\n   * The id that this answer will go to\n   */\n  nextId: string;\n}\n\nexport interface QuestionNodeProps {\n  id: string;\n  data: {\n    question: string;\n    answers: Array<Answer>;\n  }\n}\n\nconst Questionnode: React.FC<QuestionNodeProps> = (props: QuestionNodeProps) => {\n  const selectedNodeId = useContext(SelectedNodeIdContext);\n  let wrapperClassName = `${styles.questionNodeWrapper}`\n  if (selectedNodeId === props.id) {\n    wrapperClassName = `${styles.questionNodeWrapper} ${styles.selected}`;\n  }\n  const getPercent = (i: number) => {\n    const increment = 100 / (props.data.answers.length + 1);\n    return increment * (i + 1) + 0.5 * increment;\n  }\n  const makeAnswerHandles = () => props.data.answers.map((data, index) => (\n      <div key={index} className={styles.answerWrapper}>\n        <div className={styles.answerText}>{data.text}</div>\n        <Handle\n          id = {`${index}`}\n          className='handleRight'\n          style={{ position: 'absolute',\n          top: `${getPercent(index).toString()}%` }}\n          type=\"source\" position={Position.Right}/>\n      </div>\n    ))\n  \n  return (\n    <div className={wrapperClassName}>\n      <div className={styles.questionWrapper}>\n        <Handle\n          className='handleLeft'\n          style={{ position: 'absolute' }}\n          type=\"target\"\n          position={Position.Left}\n        />\n        <div className={styles.questionNodeText}>\n          {props.data.question}\n        </div>\n      </div>\n      <div className={styles.answerList}>\n        {makeAnswerHandles()}\n      </div>\n    </div>\n  )\n}\n\nexport default Questionnode;","import { MdHighlightOff } from \"react-icons/md\";\nimport styles from './Sidepanel.module.css';\n\ninterface SidePanelProps {\n  nodeData: any;\n  setNodeData: Function;\n  deleteNode: Function;\n}\n\nconst Sidepanel: React.FC<SidePanelProps> = (props: SidePanelProps) => {\n  const setQuestion = (question: string) => {\n    const newNodeData = props.nodeData;\n    newNodeData.data.question = question;\n    props.setNodeData(newNodeData);\n  }\n  const setResultText = (text: string) => {\n    const newNodeData = props.nodeData;\n    newNodeData.data.result = text;\n    props.setNodeData(newNodeData);\n  }\n  const setAnswerText = (text: string, index: number) => {\n    const newNodeData = props.nodeData;\n    newNodeData.data.answers[index].text = text;\n    props.setNodeData(newNodeData);\n  }\n  const addAnswer = () => {\n    const newNodeData = props.nodeData;\n    newNodeData.data.answers.push({\n      text: \"My answer\",\n      nextId: null\n    })\n    props.setNodeData(newNodeData);\n  }\n  const removeAnswer = (i: number) => {\n    const newNodeData = props.nodeData;\n    newNodeData.data.answers.splice(i,1);\n    props.setNodeData(newNodeData);\n  }\n  const renderAnswers = (answers: Array<any>) => answers.map((a, index) => (\n    <div key={index} className={styles.answerWrapper}>\n      <div className={styles.answerHeader}>\n        <div className={styles.sidePanelLabel}>{`Answer ${index + 1}`}</div>\n        <MdHighlightOff \n          onClick={() => removeAnswer(index)}\n          className={styles.iconBtn}\n        />\n      </div>\n      <textarea\n        rows={7}\n        className={styles.sidePanelTextInput}\n        value={a.text}\n        onChange={e => setAnswerText(e.target.value, index)}\n      />\n    </div>\n  ))\n  if (props.nodeData == null) {\n    return (<div className={styles.sidePanel}>\n      Click a node to edit it.\n    </div>)\n  } else if (props.nodeData.type === \"question\") {\n    return (\n    <div className={styles.sidePanel}>\n      <div className={styles.sidePanelLabel}>Question</div>\n      <textarea\n        rows={7}\n        className={styles.sidePanelTextInput}\n        onChange={e => setQuestion(e.target.value)}\n        value={props.nodeData.data.question}\n      />\n      { renderAnswers(props.nodeData.data.answers) }\n      <button onClick={addAnswer} className={styles.panelBtn}>Add Answer</button>\n      <button onClick={e => props.deleteNode()}\n        className={styles.deleteBtn}>Delete Node</button>\n    </div>)\n  } else if (props.nodeData.type === \"end\") {\n    return (\n      <div className={styles.sidePanel}>\n        <div className={styles.sidePanelLabel}>Result</div>\n        <textarea\n          rows={7}\n          className={styles.sidePanelTextInput}\n          onChange={e => setResultText(e.target.value)}\n          value={props.nodeData.data.result}\n        />\n        <button onClick={e => props.deleteNode()}\n          className={styles.deleteBtn}>Delete Node</button>\n      </div>\n    )\n  } else if (props.nodeData.type === \"input\") {\n    return (\n      <div className={styles.sidePanel}>\n        <div className={styles.sidePanelLabel}>Start node</div>\n        <button onClick={e => props.deleteNode()}\n          className={styles.deleteBtn}>Delete Node</button>\n      </div>\n    )\n  }\n  return (\n    <div className={styles.sidePanel}>{JSON.stringify(props.nodeData, null, 1)}</div>\n  )\n}\n\nexport default Sidepanel;","import { useContext } from \"react\";\nimport { Handle, Position } from \"react-flow-renderer\";\nimport { SelectedNodeIdContext } from \"./App\";\nimport styles from './Endnode.module.css';\n\nexport interface EndNodeProps {\n  id: string;\n  data: {\n    result: string;\n  }\n}\n\nconst Endnode: React.FC<EndNodeProps> = (props: EndNodeProps) => {\n  const selectedNodeId = useContext(SelectedNodeIdContext);\n  let wrapperClassName = `${styles.wrapper}`\n  if (selectedNodeId === props.id) {\n    wrapperClassName = `${styles.wrapper} ${styles.selected}`;\n  }\n  return (\n    <div className={wrapperClassName}>\n      <Handle\n        className='handleLeft'\n        style={{ position: 'absolute' }}\n        type=\"target\"\n        position={Position.Left}\n      />\n      <div className={styles.resultText}>\n        {props.data.result}\n      </div>\n    </div>\n  )\n}\n\nexport default Endnode;","import styles from './Form.module.css'\nimport React, { useState } from \"react\";\n\n// interface QuestionProps {\n//   question: string;\n//   answers: Array<any>;\n//   /**\n//    * The index of the answer selected\n//    */\n//   selectedAns: number | null;\n//   setSelectedAns: Function;\n// }\n\nconst Question = (props) => {\n  const renderAnswers = () => \n    props.answers.map((a, index) => (<Answer\n      key={index}   \n      text={a.text}\n      index={index}\n      selectedAns={props.selectedAns}\n      setSelectedAns={props.setSelectedAns}\n    />)\n  )\n  return  (\n    <div className={styles.questionWrapper}>\n      <div className={styles.questionText}>\n        {props.question}\n      </div>\n      { renderAnswers() }\n    </div>\n  )\n}\n\n// interface AnswerProps {\n//   text: string;\n//   index: number;\n//   selectedAns: number | null;\n//   setSelectedAns: Function;\n// }\n\nconst Answer = (props) => {\n  const onClick = () => {\n    if (props.selectedAns === props.index) {\n      props.setSelectedAns(null)\n    } else {\n      props.setSelectedAns(props.index)\n    }\n  }\n  if (props.selectedAns === props.index) {\n    return (\n      <div onClick={onClick} className={`${styles.answer} ${styles.selected}`}>\n        {props.text}\n      </div>\n    )\n  }\n  return (\n    <div onClick={onClick} className={styles.answer}>\n      {props.text}\n    </div>\n  )\n}\n\n// interface FormProps {\n//   formData: {\n//     startId: string;\n//     nodeMap: {\n//       [key: string]: any\n//     }\n//   };\n// }\n\nconst Form= (props) => {\n  // This is a stack remembering the id of the questions to show\n  const [ questionStack, setQuestionStack ] = useState([]);\n  // Maps the question id to the answer index chosen\n  const [ answerMap, setAnswerMap ] = useState({});\n  const addToStack = (id) => {\n    setQuestionStack(questionStack.concat([id]));\n  }\n  if (!(props.formData.startId in props.formData.nodeMap)) {\n    return (\n      <div className={styles.formWrapper}>\n        Your form must have a valid start node\n      </div>\n    )\n  }\n  // Add the initial question if empty\n  if (questionStack.length === 0) {\n    addToStack(props.formData.startId);\n  }\n  const setSelectedAns = (qid, aid) => {\n    // Update question map\n    const newAMap = Object.assign({}, answerMap);\n    newAMap[qid] = aid;\n    // Update stack\n    const newStack = [];\n    let hasReached = false;\n    // Loop to te question that is changed\n    for (const currQid of questionStack) {\n      if (hasReached) {\n        newAMap[currQid] = null;\n      } else {\n        newStack.push(currQid);\n      }\n      if (qid === currQid) {\n        hasReached = true;\n      }\n    }\n    if (aid !== null) {\n      // Add the next node on\n      newStack.push(props.formData.nodeMap[qid].answers[aid].nextId);\n    }\n    setQuestionStack(newStack);\n    setAnswerMap(newAMap);\n  }\n  const renderQuestions = () => questionStack.map(\n    (id, index) => {\n      const qData = props.formData.nodeMap[id];\n      if (qData == null) {\n        return (null);\n      } else if (qData.type === 'question') {\n        return (\n          <Question\n            key={index}\n            question={`${index + 1}) ${qData.question}`}\n            answers={qData.answers}\n            selectedAns={answerMap[id] ?? null}\n            setSelectedAns={(i) => setSelectedAns(id, i)}\n          />\n        )\n      } else if (qData.type === 'end') {\n        return (\n          <div key={index} className={styles.endWrapper}>\n            <div className={styles.endTitle}>Results</div>\n            <div className={styles.endResult}>{qData.result}</div>\n          </div>\n        )\n      }\n      return (null);\n    }\n  )\n  \n  return (\n    <div className={styles.formWrapper}>\n      { renderQuestions() }\n    </div>\n  )\n}\n\nexport default Form","export default __webpack_public_path__ + \"static/media/form.75b7c2c1.txt\";","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}